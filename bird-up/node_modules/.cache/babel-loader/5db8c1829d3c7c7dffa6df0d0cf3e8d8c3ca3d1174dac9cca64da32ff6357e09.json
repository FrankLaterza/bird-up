{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\charl\\\\proj\\\\Bird Up\\\\bird-up\\\\src\\\\components\\\\CameraScreen\\\\CameraScreen.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport './CameraScreen.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass CameraScreen extends React.Component {\n  constructor() {\n    super();\n    // note this is a Stateless Component because its a react class without a state defined.\n    this.video = document.querySelector('.player');\n    this.canvas = document.querySelector('.photo');\n    this.ctx = canvas.getContext('2d');\n    this.strip = document.querySelector('.strip');\n    this.snap = document.querySelector('.snap');\n    // Fix for iOS Safari from https://leemartin.dev/hello-webrtc-on-safari-11-e8bcb5335295\n    this.constraints = {\n      audio: false,\n      video: {\n        facingMode: 'user'\n      }\n    };\n  }\n  getVideo() {\n    navigator.mediaDevices.getUserMedia(constraints).then(localMediaStream => {\n      console.log(localMediaStream);\n\n      //  DEPRECIATION : \n      //       The following has been depreceated by major browsers as of Chrome and Firefox.\n      //       video.src = window.URL.createObjectURL(localMediaStream);\n      //       Please refer to these:\n      //       Deprecated  - https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL\n      //       Newer Syntax - https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/srcObject\n      console.dir(video);\n      if ('srcObject' in video) {\n        video.srcObject = localMediaStream;\n      } else {\n        video.src = URL.createObjectURL(localMediaStream);\n      }\n      // video.src = window.URL.createObjectURL(localMediaStream);\n      video.play();\n    }).catch(err => {\n      console.error(`OH NO!!!!`, err);\n    });\n  }\n  paintToCanvas() {\n    const width = video.videoWidth;\n    const height = video.videoHeight;\n    canvas.width = width;\n    canvas.height = height;\n    return setInterval(() => {\n      ctx.drawImage(video, 0, 0, width, height);\n      // take the pixels out\n      // let pixels = ctx.getImageData(0, 0, width, height);\n      // mess with them\n      // pixels = redEffect(pixels);\n\n      // pixels = rgbSplit(pixels);\n      // ctx.globalAlpha = 0.8;\n\n      // pixels = greenScreen(pixels);\n      // put them back\n      // ctx.putImageData(pixels, 0, 0);\n    }, 16);\n  }\n  takePhoto() {\n    // played the sound\n    snap.currentTime = 0;\n    snap.play();\n\n    // take the data out of the canvas\n    const data = canvas.toDataURL('image/jpeg');\n    const link = document.createElement('a');\n    link.href = data;\n    link.setAttribute('download', 'handsome');\n    link.innerHTML = `<img src=\"${data}\" alt=\"Handsome Man\" />`;\n    strip.insertBefore(link, strip.firstChild);\n  }\n  redEffect(pixels) {\n    for (let i = 0; i < pixels.data.length; i += 4) {\n      pixels.data[i + 0] = pixels.data[i + 0] + 200; // RED\n      pixels.data[i + 1] = pixels.data[i + 1] - 50; // GREEN\n      pixels.data[i + 2] = pixels.data[i + 2] * 0.5; // Blue\n    }\n    return pixels;\n  }\n  rgbSplit(pixels) {\n    for (let i = 0; i < pixels.data.length; i += 4) {\n      pixels.data[i - 150] = pixels.data[i + 0]; // RED\n      pixels.data[i + 500] = pixels.data[i + 1]; // GREEN\n      pixels.data[i - 550] = pixels.data[i + 2]; // Blue\n    }\n    return pixels;\n  }\n  greenScreen(pixels) {\n    const levels = {};\n    document.querySelectorAll('.rgb input').forEach(input => {\n      levels[input.name] = input.value;\n    });\n    for (i = 0; i < pixels.data.length; i = i + 4) {\n      red = pixels.data[i + 0];\n      green = pixels.data[i + 1];\n      blue = pixels.data[i + 2];\n      alpha = pixels.data[i + 3];\n      if (red >= levels.rmin && green >= levels.gmin && blue >= levels.bmin && red <= levels.rmax && green <= levels.gmax && blue <= levels.bmax) {\n        // take it out!\n        pixels.data[i + 3] = 0;\n      }\n    }\n    return pixels;\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"cameraBox\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"photobooth\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"controls\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: \"takePhoto()\",\n            children: \"Take Photo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n          class: \"photo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n          class: \"player\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"strip\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n        class: \"snap\",\n        src: \"./snap.mp3\",\n        hidden: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 5\n    }, this);\n  }\n}\n\n// MapScreen.propTypes = { };\n\n// MapScreen.defaultProps = { };\n\nexport default CameraScreen;","map":{"version":3,"names":["React","PropTypes","jsxDEV","_jsxDEV","CameraScreen","Component","constructor","video","document","querySelector","canvas","ctx","getContext","strip","snap","constraints","audio","facingMode","getVideo","navigator","mediaDevices","getUserMedia","then","localMediaStream","console","log","dir","srcObject","src","URL","createObjectURL","play","catch","err","error","paintToCanvas","width","videoWidth","height","videoHeight","setInterval","drawImage","takePhoto","currentTime","data","toDataURL","link","createElement","href","setAttribute","innerHTML","insertBefore","firstChild","redEffect","pixels","i","length","rgbSplit","greenScreen","levels","querySelectorAll","forEach","input","name","value","red","green","blue","alpha","rmin","gmin","bmin","rmax","gmax","bmax","render","id","children","class","onClick","fileName","_jsxFileName","lineNumber","columnNumber","hidden"],"sources":["C:/Users/charl/proj/Bird Up/bird-up/src/components/CameraScreen/CameraScreen.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport './CameraScreen.css';\n\nclass CameraScreen extends React.Component {\n  constructor() {\n    super();\n    // note this is a Stateless Component because its a react class without a state defined.\n  }\n  video = document.querySelector('.player');\n  canvas = document.querySelector('.photo');\n  ctx = canvas.getContext('2d');\n  strip = document.querySelector('.strip');\n  snap = document.querySelector('.snap');\n\n  // Fix for iOS Safari from https://leemartin.dev/hello-webrtc-on-safari-11-e8bcb5335295\n  \n  constraints = {\n    audio: false,\n    video: {\n      facingMode: 'user'\n    }\n  }\n  \n  getVideo() {\n  navigator.mediaDevices.getUserMedia(constraints)\n    .then(localMediaStream => {\n      console.log(localMediaStream);\n\n      //  DEPRECIATION : \n      //       The following has been depreceated by major browsers as of Chrome and Firefox.\n      //       video.src = window.URL.createObjectURL(localMediaStream);\n      //       Please refer to these:\n      //       Deprecated  - https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL\n      //       Newer Syntax - https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/srcObject\n      console.dir(video);\n      if ('srcObject' in video) {\n        video.srcObject = localMediaStream;\n      } else {\n        video.src = URL.createObjectURL(localMediaStream);\n      }\n      // video.src = window.URL.createObjectURL(localMediaStream);\n      video.play();\n    })\n    .catch(err => {\n      console.error(`OH NO!!!!`, err);\n    });\n}\n\npaintToCanvas() {\n  const width = video.videoWidth;\n  const height = video.videoHeight;\n  canvas.width = width;\n  canvas.height = height;\n\n  return setInterval(() => {\n    ctx.drawImage(video, 0, 0, width, height);\n    // take the pixels out\n    // let pixels = ctx.getImageData(0, 0, width, height);\n    // mess with them\n    // pixels = redEffect(pixels);\n\n    // pixels = rgbSplit(pixels);\n    // ctx.globalAlpha = 0.8;\n\n    // pixels = greenScreen(pixels);\n    // put them back\n    // ctx.putImageData(pixels, 0, 0);\n  }, 16);\n}\n\ntakePhoto() {\n  // played the sound\n  snap.currentTime = 0;\n  snap.play();\n\n  // take the data out of the canvas\n  const data = canvas.toDataURL('image/jpeg');\n  const link = document.createElement('a');\n  link.href = data;\n  link.setAttribute('download', 'handsome');\n  link.innerHTML = `<img src=\"${data}\" alt=\"Handsome Man\" />`;\n  strip.insertBefore(link, strip.firstChild);\n}\n\nredEffect(pixels) {\n  for (let i = 0; i < pixels.data.length; i += 4) {\n    pixels.data[i + 0] = pixels.data[i + 0] + 200; // RED\n    pixels.data[i + 1] = pixels.data[i + 1] - 50; // GREEN\n    pixels.data[i + 2] = pixels.data[i + 2] * 0.5; // Blue\n  }\n  return pixels;\n}\n\nrgbSplit(pixels) {\n  for (let i = 0; i < pixels.data.length; i += 4) {\n    pixels.data[i - 150] = pixels.data[i + 0]; // RED\n    pixels.data[i + 500] = pixels.data[i + 1]; // GREEN\n    pixels.data[i - 550] = pixels.data[i + 2]; // Blue\n  }\n  return pixels;\n}\n\ngreenScreen(pixels) {\n  const levels = {};\n\n  document.querySelectorAll('.rgb input').forEach((input) => {\n    levels[input.name] = input.value;\n  });\n\n  for (i = 0; i < pixels.data.length; i = i + 4) {\n    red = pixels.data[i + 0];\n    green = pixels.data[i + 1];\n    blue = pixels.data[i + 2];\n    alpha = pixels.data[i + 3];\n\n    if (red >= levels.rmin\n      && green >= levels.gmin\n      && blue >= levels.bmin\n      && red <= levels.rmax\n      && green <= levels.gmax\n      && blue <= levels.bmax) {\n      // take it out!\n      pixels.data[i + 3] = 0;\n    }\n  }\n\n  return pixels;\n}\nrender() {\n  return (\n    <div id=\"cameraBox\" >\n      <div class=\"photobooth\">\n        <div class=\"controls\">\n          <button onClick=\"takePhoto()\">Take Photo</button>\n          {/* <!--       <div class=\"rgb\">\n            <label for=\"rmin\">Red Min:</label>\n            <input type=\"range\" min=0 max=255 name=\"rmin\">\n            <label for=\"rmax\">Red Max:</label>\n            <input type=\"range\" min=0 max=255 name=\"rmax\">\n            <br>\n              <label for=\"gmin\">Green Min:</label>\n              <input type=\"range\" min=0 max=255 name=\"gmin\">\n              <label for=\"gmax\">Green Max:</label>\n              <input type=\"range\" min=0 max=255 name=\"gmax\">\n              <br>\n                <label for=\"bmin\">Blue Min:</label>\n                <input type=\"range\" min=0 max=255 name=\"bmin\">\n                <label for=\"bmax\">Blue Max:</label>\n                <input type=\"range\" min=0 max=255 name=\"bmax\">\n              </div> --> */}\n        </div>\n\n        <canvas class=\"photo\"></canvas>\n        <video class=\"player\"></video>\n        <div class=\"strip\"></div>\n      </div>\n\n      <audio class=\"snap\" src=\"./snap.mp3\" hidden></audio>\n    </div>\n  );\n}\n}\n\n// MapScreen.propTypes = { };\n\n// MapScreen.defaultProps = { };\n\nexport default CameraScreen;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}